import Navbar from '../components/Navbar'; import Footer from '../components/Footer'
import VenueCard from '../components/VenueCard'; import Filters from '../components/Filters'
import { useEffect, useState } from 'react'; const API = import.meta.env.VITE_API_BASE
export default function Venues(){const[data,setData]=useState([]),[filtered,setFiltered]=useState([]);useEffect(()=>{fetch(${API}/venues).then(r=>r.json()).then(rows=>{setData(rows);setFiltered(rows)}).catch(()=>{})},[]);const onChange=({q,location,type,premium})=>{const qx=(q||'').toLowerCase();setFiltered(data.filter(v=>{const okQ=!qx||(v.name?.toLowerCase().includes(qx)||(v.style||'').toLowerCase().includes(qx));const okL=!location||(v.location||'').toLowerCase().includes(location.toLowerCase());const okP=!premium||!!v.premium;return okQ&&okL&&okP}))};return(<div><Navbar/><div className="container-2xl section"><h1 className="font-display text-3xl mb-4">All Venues</h1><Filters onChange={onChange}/><div className="grid md:grid-cols-3 gap-5 mt-5">{filtered.map(v=><VenueCard key={v.id} venue={v}/>)}</div></div><Footer/></div>)}